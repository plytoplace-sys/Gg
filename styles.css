:root{
  --w: min(92vw, 560px);
  --h: calc(var(--w) * 16 / 9);
  --glass: rgba(12,14,20,.58);
  --glass2: rgba(12,14,20,.38);
  --stroke: rgba(255,255,255,.12);
  --text: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.72);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:#070810; color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  display:flex; align-items:center; justify-content:center;
  padding:14px;
}
.stage{
  width:var(--w); height:var(--h);
  border-radius:26px; overflow:hidden; position:relative;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 18px 60px rgba(0,0,0,.55);
  background:#0b0c14;
}
#scene{width:100%; height:100%; display:block}

.flash{
  position:absolute; inset:0;
  background: radial-gradient(closest-side at 50% 55%, rgba(255,255,255,0.35), rgba(255,255,255,0) 65%);
  opacity:0;
  pointer-events:none;
  transition: opacity 140ms ease;
  mix-blend-mode: screen;
}
.flash.on{ opacity: 1; }

.hud{
  position:absolute; inset:0;
  padding:12px; pointer-events:none;
  display:flex; flex-direction:column; justify-content:space-between;
}

.hud-top{
  display:grid;
  grid-template-columns: 1fr 1.2fr 1fr;
  gap:10px;
  align-items:start;
}

.badge{
  background:var(--glass);
  border:1px solid var(--stroke);
  border-radius:16px;
  padding:10px 12px;
  backdrop-filter: blur(10px);
  box-shadow:0 10px 22px rgba(0,0,0,.35);
}
.badge-title{font-weight:950; letter-spacing:.8px; font-size:12px}
.badge-sub{font-size:11px; opacity:.75; margin-top:2px}

.topdonors{
  background:var(--glass);
  border:1px solid var(--stroke);
  border-radius:16px;
  padding:10px 10px;
  backdrop-filter: blur(10px);
  box-shadow:0 10px 22px rgba(0,0,0,.35);
}
.donorlist{
  margin:0; padding-left:18px;
  display:flex; flex-direction:column; gap:6px;
  font-size:11px;
}
.donorlist li{
  display:flex; justify-content:space-between; gap:10px;
  padding:6px 8px;
  border-radius:12px;
  background: rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.07);
}
.donorlist .nm{opacity:.9; font-weight:800; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:140px}
.donorlist .am{font-weight:950; opacity:.95}

.stats{display:flex; gap:10px; justify-content:flex-end}
.stat{
  width:78px; text-align:center;
  background:var(--glass);
  border:1px solid var(--stroke);
  border-radius:16px;
  padding:8px 10px;
  backdrop-filter: blur(10px);
  box-shadow:0 10px 22px rgba(0,0,0,.35);
}
.stat-label{font-size:10px; opacity:.78}
.stat-value{font-size:16px; font-weight:950; margin-top:2px}

.hud-bottom{
  display:grid;
  grid-template-columns: 1.05fr 0.95fr;
  gap:10px;
  align-items:end;
  pointer-events:none;
}

.panel{
  background:var(--glass2);
  border:1px solid var(--stroke);
  border-radius:18px;
  padding:10px;
  backdrop-filter: blur(10px);
}
.panel-title{font-size:11px; font-weight:900; opacity:.85; margin-bottom:8px}

.feed{display:flex; flex-direction:column; gap:6px; max-height:190px; overflow:hidden}
.feed-item{
  display:flex; justify-content:space-between; align-items:center; gap:10px;
  padding:7px 8px; border-radius:12px;
  background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.07);
  font-size:11px;
}
.feed-left{display:flex; align-items:center; gap:8px; min-width:0}
.dot{width:10px; height:10px; border-radius:999px; box-shadow:0 0 12px rgba(255,255,255,.22)}
.feed-name{white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:170px}
.feed-amt{font-weight:950}
.feed-msg{opacity:.72; font-size:10px; margin-top:2px}

.controls{pointer-events:auto}
.grid{display:grid; grid-template-columns: repeat(2, 1fr); gap:8px}
.card{
  background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.07);
  border-radius:16px;
  padding:9px;
}
.card-head{display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px}
.laneTag{display:flex; align-items:center; gap:8px}
.laneDot{width:10px; height:10px; border-radius:999px; box-shadow:0 0 12px rgba(255,255,255,.22)}
.laneName{font-size:11px; font-weight:950}
.btnRow{display:grid; grid-template-columns: repeat(3, 1fr); gap:6px}
.btnMini{
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.10);
  color:var(--text);
  padding:8px 7px;
  border-radius:12px;
  font-weight:950;
  cursor:pointer;
  display:flex; align-items:center; justify-content:center; gap:6px;
}
.btnMini:hover{background:rgba(255,255,255,.14)}
.btnMini:active{transform:translateY(1px)}
.ico{font-size:12px}
.help{margin-top:8px; font-size:10px; opacity:.72; line-height:1.25}

.wins{grid-column:1/-1}
.wins-total{font-weight:950; font-size:12px; margin-bottom:8px; opacity:.92}
.wins-grid{display:grid; grid-template-columns: repeat(3, 1fr); gap:8px}
.win-chip{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  padding:8px 9px;
  border-radius:14px;
  background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.07);
  font-size:11px;
}
.win-chip .lbl{opacity:.82; font-weight:900}
.win-chip .val{font-weight:1000}

.winnerOverlay{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  pointer-events:auto;
}
.winnerOverlay[hidden]{display:none !important;}
.winnerCard{
  width:min(86%,360px);
  background:rgba(10,12,18,.86);
  border:1px solid rgba(255,255,255,.12);
  border-radius:18px;
  padding:14px;
  backdrop-filter: blur(10px);
  box-shadow:0 18px 60px rgba(0,0,0,.55);
  text-align:center;
}
.winnerTitle{font-weight:1000; letter-spacing:1px; opacity:.85; font-size:12px}
.winnerLane{font-size:20px; font-weight:1000; margin:6px 0 10px}
.btn{
  width:100%;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.10);
  color:var(--text);
  padding:10px;
  border-radius:14px;
  font-weight:1000;
  cursor:pointer;
}
.btn:hover{background:rgba(255,255,255,.14)}
.btn:active{transform:translateY(1px)}

.hit{position:absolute; inset:0; z-index:5; pointer-events:auto; background:transparent; }

@media (max-width: 420px){
  :root{ --w: min(96vw, 420px); }
  .hud-top{grid-template-columns: 1fr;}
  .stats{justify-content:flex-start}
}
