<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Donat Drag Race — STREAM ULTRA (SVG/XML)</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="stage" id="stage">
    <svg id="scene" viewBox="0 0 1080 1920" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Neon drag racing scene ultra">
      <defs>
        <!-- ===== Filters ===== -->
        <filter id="glowXS" x="-80%" y="-80%" width="260%" height="260%">
          <feGaussianBlur stdDeviation="2.2" result="b"/>
          <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
        <filter id="glowS" x="-120%" y="-120%" width="340%" height="340%">
          <feGaussianBlur stdDeviation="6.0" result="b"/>
          <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
        <filter id="glowM" x="-160%" y="-160%" width="420%" height="420%">
          <feGaussianBlur stdDeviation="13" result="b"/>
          <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
        <filter id="glowL" x="-240%" y="-240%" width="580%" height="580%">
          <feGaussianBlur stdDeviation="26" result="b"/>
          <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>

        <filter id="softShadow" x="-80%" y="-80%" width="260%" height="260%">
          <feGaussianBlur stdDeviation="10" result="b"/>
          <feColorMatrix type="matrix" values="
            0 0 0 0 0
            0 0 0 0 0
            0 0 0 0 0
            0 0 0 0.55 0" result="s"/>
          <feMerge><feMergeNode in="s"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>

        <filter id="motionBlurTiny" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="3.0" />
        </filter>

        <!-- ===== Sky & haze ===== -->
        <linearGradient id="sky" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="#030615"/>
          <stop offset="0.55" stop-color="#070318"/>
          <stop offset="1" stop-color="#030615"/>
        </linearGradient>
        <radialGradient id="hazeA" cx="56%" cy="16%" r="70%">
          <stop offset="0" stop-color="#3e6bff" stop-opacity="0.55"/>
          <stop offset="1" stop-color="#3e6bff" stop-opacity="0"/>
        </radialGradient>
        <radialGradient id="hazeB" cx="18%" cy="64%" r="75%">
          <stop offset="0" stop-color="#ff49c8" stop-opacity="0.44"/>
          <stop offset="1" stop-color="#ff49c8" stop-opacity="0"/>
        </radialGradient>
        <radialGradient id="hazeC" cx="82%" cy="66%" r="75%">
          <stop offset="0" stop-color="#ffb13d" stop-opacity="0.34"/>
          <stop offset="1" stop-color="#ffb13d" stop-opacity="0"/>
        </radialGradient>

        <!-- ===== Road paints ===== -->
        <linearGradient id="asphalt" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="#2b2f5a" stop-opacity="0.96"/>
          <stop offset="0.55" stop-color="#0e1022" stop-opacity="0.99"/>
          <stop offset="1" stop-color="#070812" stop-opacity="0.99"/>
        </linearGradient>
        <linearGradient id="roadSheen" x1="0" y1="0" x2="1" y2="0">
          <stop offset="0" stop-color="#ffffff" stop-opacity="0"/>
          <stop offset="0.40" stop-color="#ffffff" stop-opacity="0.06"/>
          <stop offset="0.52" stop-color="#ffffff" stop-opacity="0.22"/>
          <stop offset="0.64" stop-color="#ffffff" stop-opacity="0.06"/>
          <stop offset="1" stop-color="#ffffff" stop-opacity="0"/>
        </linearGradient>
        <linearGradient id="edgeNeon" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="#7aa2ff" stop-opacity="0.85"/>
          <stop offset="0.5" stop-color="#ff4bd1" stop-opacity="0.52"/>
          <stop offset="1" stop-color="#36ff7a" stop-opacity="0.75"/>
        </linearGradient>

        <!-- road light streak -->
        <linearGradient id="streak" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="#7aa2ff" stop-opacity="0"/>
          <stop offset="0.25" stop-color="#7aa2ff" stop-opacity="0.22"/>
          <stop offset="0.6" stop-color="#ff4bd1" stop-opacity="0.18"/>
          <stop offset="1" stop-color="#36ff7a" stop-opacity="0"/>
        </linearGradient>

        <!-- ===== Flames ===== -->
        <radialGradient id="flameCore" cx="50%" cy="42%" r="70%">
          <stop offset="0" stop-color="#ffffff" stop-opacity="0.98"/>
          <stop offset="0.24" stop-color="#ffef7a" stop-opacity="0.78"/>
          <stop offset="0.55" stop-color="#ff7a1a" stop-opacity="0.62"/>
          <stop offset="1" stop-color="#ff1b7a" stop-opacity="0.00"/>
        </radialGradient>

        <!-- ===== Car materials ===== -->
        <linearGradient id="metal" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="#ffffff" stop-opacity="0.35"/>
          <stop offset="0.18" stop-color="#ffffff" stop-opacity="0.10"/>
          <stop offset="0.55" stop-color="#000000" stop-opacity="0.05"/>
          <stop offset="1" stop-color="#000000" stop-opacity="0.18"/>
        </linearGradient>
        <linearGradient id="clearCoat" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stop-color="#ffffff" stop-opacity="0.35"/>
          <stop offset="0.25" stop-color="#ffffff" stop-opacity="0.12"/>
          <stop offset="0.6" stop-color="#ffffff" stop-opacity="0.06"/>
          <stop offset="1" stop-color="#ffffff" stop-opacity="0"/>
        </linearGradient>
        <linearGradient id="glass" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stop-color="#d7f1ff" stop-opacity="0.55"/>
          <stop offset="0.45" stop-color="#69bfff" stop-opacity="0.15"/>
          <stop offset="1" stop-color="#ffffff" stop-opacity="0.02"/>
        </linearGradient>

        <!-- ===== Ultra car template ===== -->
        <g id="carTemplateUltra">
          <!-- shadow -->
          <ellipse class="carShadow" cx="0" cy="86" rx="92" ry="24" fill="#000" opacity="0.34" filter="url(#softShadow)"/>
          <!-- underglow -->
          <ellipse class="carUnderglow" cx="0" cy="84" rx="78" ry="18" opacity="0.30" filter="url(#glowM)"/>

          <!-- rear wing -->
          <path class="carWing" d="M-98 16 h44 q14 0 18 -14 l2 -14 h-80z" opacity="0.34"/>
          <path class="carWingEdge" d="M-98 16 h44 q14 0 18 -14" fill="none" stroke="#fff" stroke-opacity="0.10" stroke-width="3"/>

          <!-- body base -->
          <path class="carBody"
                d="M-106 44
                   Q-106 6 -76 -16
                   Q-38 -50 0 -52
                   Q38 -50 76 -16
                   Q106 6 106 44
                   Q106 76 82 92
                   Q52 114 0 118
                   Q-52 114 -82 92
                   Q-106 76 -106 44Z"/>

          <!-- panel lines -->
          <path class="carPanel"
                d="M-74 10 Q0 -18 74 10" fill="none" stroke="#000" stroke-opacity="0.16" stroke-width="6" stroke-linecap="round"/>
          <path class="carPanel"
                d="M-86 52 Q0 76 86 52" fill="none" stroke="#000" stroke-opacity="0.16" stroke-width="6" stroke-linecap="round"/>

          <!-- metallic shading -->
          <path class="carMetal"
                d="M-100 40
                   Q-100 10 -70 -10
                   Q-34 -38 0 -40
                   Q34 -38 70 -10
                   Q100 10 100 40
                   Q100 66 78 80
                   Q48 100 0 102
                   Q-48 100 -78 80
                   Q-100 66 -100 40Z"
                fill="url(#metal)" opacity="0.75"/>

          <!-- clear coat sweep -->
          <path class="carCoat"
                d="M-72 34 Q-30 -8 0 -10 Q30 -8 72 34 Q28 54 0 54 Q-28 54 -72 34Z"
                fill="url(#clearCoat)" opacity="0.85"/>

          <!-- windshield -->
          <path class="carGlass"
                d="M-52 20 Q0 -26 52 20 Q28 38 0 38 Q-28 38 -52 20Z"
                fill="url(#glass)" opacity="0.55"/>

          <!-- headlights -->
          <g class="carLights" filter="url(#glowS)">
            <path class="carHeadL" d="M-64 66 q20 10 38 0 q-18 28 -38 0Z" opacity="0.55"/>
            <path class="carHeadR" d="M64 66 q-20 10 -38 0 q18 28 38 0Z" opacity="0.55"/>
          </g>

          <!-- grill -->
          <path class="carGrill" d="M-44 68 Q0 92 44 68 Q26 104 0 110 Q-26 104 -44 68Z" opacity="0.22"/>

          <!-- splitter -->
          <path class="carSplitter"
                d="M-82 86 Q0 120 82 86 Q62 132 0 142 Q-62 132 -82 86Z"
                opacity="0.22"/>

          <!-- wheels -->
          <g class="carWheels">
            <circle cx="-78" cy="70" r="15" fill="#050510" opacity="0.85"/>
            <circle cx="78" cy="70" r="15" fill="#050510" opacity="0.85"/>
            <circle cx="-78" cy="70" r="7" fill="#ffffff" opacity="0.16"/>
            <circle cx="78" cy="70" r="7" fill="#ffffff" opacity="0.16"/>
          </g>

          <!-- side neon trim -->
          <path class="carTrim" d="M-90 58 Q0 92 90 58" fill="none" stroke="#fff" stroke-opacity="0.14" stroke-width="6" stroke-linecap="round" filter="url(#glowXS)"/>
        </g>

      </defs>

      <!-- ===== Background ===== -->
      <rect width="1080" height="1920" fill="url(#sky)"/>
      <rect width="1080" height="1920" fill="url(#hazeA)"/>
      <rect width="1080" height="1920" fill="url(#hazeB)"/>
      <rect width="1080" height="1920" fill="url(#hazeC)"/>

      <!-- starfield -->
      <g opacity="0.55" filter="url(#glowXS)">
        <circle cx="120" cy="140" r="2.4" fill="#fff"/><circle cx="220" cy="200" r="2.0" fill="#fff"/>
        <circle cx="940" cy="160" r="2.4" fill="#fff"/><circle cx="820" cy="230" r="2.2" fill="#fff"/>
        <circle cx="520" cy="120" r="2.0" fill="#fff"/><circle cx="620" cy="210" r="1.6" fill="#fff"/>
        <circle cx="360" cy="180" r="1.4" fill="#fff"/><circle cx="710" cy="150" r="1.3" fill="#fff"/>
      </g>

      <!-- City (back) -->
      <g id="cityBack" opacity="0.65">
        <g fill="#07091b">
          <rect x="18" y="160" width="190" height="720" rx="14"/>
          <rect x="232" y="250" width="230" height="630" rx="14"/>
          <rect x="485" y="130" width="200" height="750" rx="14"/>
          <rect x="708" y="235" width="270" height="645" rx="14"/>
          <rect x="996" y="210" width="80" height="670" rx="14"/>
        </g>
        <!-- window grids -->
        <g id="winBack" opacity="0.20" filter="url(#glowS)"></g>
        <!-- neon billboards -->
        <g opacity="0.26" filter="url(#glowL)">
          <rect x="58" y="310" width="120" height="10" fill="#7aa2ff"/>
          <rect x="270" y="360" width="150" height="10" fill="#ff4bd1"/>
          <rect x="520" y="280" width="130" height="10" fill="#36ff7a"/>
          <rect x="740" y="340" width="190" height="10" fill="#ffcc33"/>
        </g>
      </g>

      <!-- City (front) -->
      <g id="cityFront" opacity="0.82" transform="translate(0,80)">
        <g fill="#0c0f26">
          <rect x="-30" y="560" width="310" height="640" rx="16"/>
          <rect x="270" y="520" width="300" height="680" rx="16"/>
          <rect x="590" y="590" width="320" height="610" rx="16"/>
          <rect x="900" y="540" width="220" height="660" rx="16"/>
        </g>
        <g id="winFront" opacity="0.22" filter="url(#glowM)"></g>
        <g opacity="0.28" filter="url(#glowL)">
          <rect x="50" y="660" width="220" height="12" fill="#ff4bd1"/>
          <rect x="330" y="620" width="230" height="12" fill="#7aa2ff"/>
          <rect x="650" y="710" width="230" height="12" fill="#36ff7a"/>
          <rect x="920" y="660" width="180" height="12" fill="#ffcc33"/>
        </g>
      </g>

      <!-- ===== Road ===== -->
      <path id="road" d="M 400 260 L 680 260 L 1000 1680 L 80 1680 Z" fill="url(#asphalt)"/>
      <path d="M 430 300 L 650 300 L 920 1680 L 160 1680 Z" fill="url(#roadSheen)" opacity="0.62"/>

      <!-- streaks moving -->
      <g id="streaks" opacity="0.55" filter="url(#glowM)"></g>

      <!-- neon edges -->
      <path d="M 400 260 L 80 1680" stroke="url(#edgeNeon)" stroke-width="56" opacity="0.30" filter="url(#glowL)"/>
      <path d="M 680 260 L 1000 1680" stroke="url(#edgeNeon)" stroke-width="56" opacity="0.30" filter="url(#glowL)"/>
      <path d="M 400 260 L 80 1680" stroke="rgba(255,255,255,0.16)" stroke-width="12" opacity="0.86" filter="url(#glowS)"/>
      <path d="M 680 260 L 1000 1680" stroke="rgba(255,255,255,0.16)" stroke-width="12" opacity="0.86" filter="url(#glowS)"/>

      <!-- lane lines -->
      <g id="laneLines" stroke="rgba(255,255,255,0.22)" stroke-linecap="round" fill="none" opacity="0.97"></g>
      <path id="centerGlow" d="M 540 260 L 540 1680" stroke="#7aa2ff" stroke-width="34" opacity="0.12" filter="url(#glowL)"/>

      <!-- finish -->
      <g id="finishBand"></g>

      <!-- FX + cars -->
      <g id="trails" filter="url(#glowM)"></g>
      <g id="fx" filter="url(#glowL)"></g>
      <g id="cars" filter="url(#glowS)"></g>

      <!-- vignette -->
      <rect width="1080" height="1920" fill="black" opacity="0.14"/>
    </svg>

    <div class="flash" id="flash"></div>

    <!-- Top donors strip -->
    <div class="topStrip" aria-label="top donors strip">
      <div class="stripTitle">ТОП</div>
      <div class="stripList" id="stripList"></div>
    </div>

    <!-- Bottom info panel -->
    <div class="bottomInfo">
      <div class="miniStats">
        <div class="pill"><span class="k">Банк</span><span class="v" id="bankValue">0</span></div>
        <div class="pill"><span class="k">Раунд</span><span class="v" id="roundValue">01</span></div>
        <div class="pill"><span class="k">Время</span><span class="v" id="timeValue">60</span></div>
      </div>

      <div class="feedWrap">
        <div class="feedTitle">Оповещения донатов</div>
        <div class="feed" id="feed"></div>
      </div>

      <div class="winsWrap">
        <div class="feedTitle">Победы</div>
        <div class="winsRow">
          <div class="pill big"><span class="k">Всего</span><span class="v" id="winsTotal">0</span></div>
          <div class="winsMini" id="winsMini"></div>
        </div>
      </div>
    </div>

    <div class="winnerOverlay" id="winner" hidden>
      <div class="winnerCard">
        <div class="winnerTitle">ПОБЕДИТЕЛЬ</div>
        <div class="winnerLane" id="winnerLane">Полоса 1</div>
        <button class="btn" id="btnNext">Следующий раунд</button>
      </div>
    </div>

    <div class="hit" id="hit" aria-label="tap to donate lane"></div>
  </div>

  <script src="app.js"></script>
</body>
</html>
